function applyFilterAndUpdateDOM(){const e=this;e.classList.contains("applied")?(removeStyleFromGroupOf(e.dataset.filter),delete filters[e.dataset.filter]):(removeStyleFromGroupOf(e.dataset.filter),filters[e.dataset.filter]=e.innerText,e.classList.add("applied"));const{url:t,endpoints:n}=getURLToFetchFrom();updateLocationWithoutRefresh(n),getData(t).then(updateDOM).catch(e=>{console.error(e)})}function removeStyleFromGroupOf(e){const t=document.querySelectorAll(`button[data-filter=${e}]`);t.forEach(e=>e.classList.remove("applied"))}function getURLToFetchFrom(){let e="https://api.spacexdata.com/v3/launches",t="?limit=100";for(let e in filters)t+=`&${e}=${filters[e]}`;return{url:e+t,endpoints:t}}async function getData(e){const t=await fetch(e),n=await t.json();return n}function updateDOM(e){console.log(e.length);const t=document.getElementById("programs");t.innerHTML="",e.forEach(e=>{const n=createCardComponent(e);t.append(n)})}function updateLocationWithoutRefresh(e){history.pushState(filters,"",e)}function createCardComponent(e){const t=document.createElement("section");t.className="program";let n=createImageComponent(e);return t.append(n),n=createContentComponent(e),t.append(n),t}function createImageComponent(e){const t=document.createElement("img");return t.src=e.links.mission_patch_small,t.alt=`${e.mission_name} #${e.flight_number}`,t}function createContentComponent(e){const t={"Mission Ids:":e.mission_id,"Launch Year:":e.launch_year,"Successful Launch:":e.launch_success,"Successful Landing:":e.launch_landing},n=document.createElement("div");n.className="content";let o=createHeaderComponent(e);n.append(o);for(let e in t)o=createPropertyComponent(e,t[e]),n.append(o);return n}function createHeaderComponent(e){const t=document.createElement("h3");return t.innerText=`${e.mission_name} #${e.flight_number}`,t}function createPropertyComponent(e,t){const n=document.createElement("div");if("Mission Ids:"==e){let o=document.createElement("div");if(o.innerText=e,o.className="bold",n.append(o),o=document.createElement("ul"),0!=t.length)t.forEach(e=>{const t=document.createElement("li");t.innerText=e,o.append(t)});else{const e=document.createElement("li");e.innerText="not provided",o.append(e)}n.append(o)}else{let o=document.createElement("span");o.innerText=e+" ",o.className="bold",n.append(o),o=document.createElement("span"),o.innerText=null!=t?t:"not provided",n.append(o)}return n}const buttons=document.querySelectorAll("button"),baseURL=`${location.origin}?limit=100`;let filters={};updateLocationWithoutRefresh(baseURL),buttons.forEach(e=>{e.addEventListener("click",applyFilterAndUpdateDOM)});